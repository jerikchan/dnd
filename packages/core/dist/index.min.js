!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).FaiDnd={})}(this,function(e){"use strict";var r,i="fai-dnd-container-instance",v="fai-dnd-draggable-wrapper",o="animated",u="__fai_dnd_draggable_translation_value",a="__fai_dnd_draggable_visibility_value",h="fai-dnd-ghost",y="fai-dnd-container",c="fai-dnd-extra-size-for-insertion",d="fai-dnd-stretcher-element",f="fai-dnd-stretcher-instance",l="fai-dnd-disable-touch-action",s="fai-dnd-no-user-select",g="fai-dnd-prevent-auto-scroll-class",p="fai-dnd-drop-preview-default-class",m="fai-dnd-drop-preview-inner-class",b="fai-dnd-drop-preview-constant-class",x="fai-dnd-drop-preview-flex-container-class",w="fai-dnd-guideline",t=Object.freeze({containerInstance:i,defaultGroupName:"@@fai-dnd-default-group@@",wrapperClass:v,defaultGrabHandleClass:"fai-dnd-default-grap-handle",animationClass:o,translationValue:u,visibilityValue:a,ghostClass:h,containerClass:y,extraSizeForInsertion:c,stretcherElementClass:d,stretcherElementInstance:f,isDraggableDetached:"smoth-dnd-is-draggable-detached",disbaleTouchActions:l,noUserSelectClass:s,preventAutoScrollClass:g,dropPlaceholderDefaultClass:p,dropPlaceholderInnerClass:m,dropPlaceholderWrapperClass:b,dropPlaceholderFlexContainerClass:x,guidelineClass:w}),E={groupName:void 0,behaviour:"move",orientation:"vertical",getChildPayload:void 0,animationDuration:250,autoScrollEnabled:!0,shouldAcceptDrop:void 0,shouldAnimateDrop:void 0,disabled:!1,snappable:!1,dragOnPoint:!1};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,i=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(ie=r=r||{}).x="x",ie.y="y",ie.xy="xy";function R(e,t,n){return"x"===n?{left:Math.max(e.left,t.left),top:e.top,right:Math.min(e.right,t.right),bottom:e.bottom}:{left:e.left,top:Math.max(e.top,t.top),right:e.right,bottom:Math.min(e.bottom,t.bottom)}}function I(e,t){var n=window.getComputedStyle(e),e=n.overflow,t=n["overflow-".concat(t)];return"auto"===e||"scroll"===e||("auto"===t||"scroll"===t)}function A(t,n){var o=[];function e(){o&&(o.forEach(function(e){return e.removeEventListener("scroll",n)}),window.removeEventListener("scroll",n))}return function(){for(var e=t;e;)(I(e,"x")||I(e,"y"))&&o.push(e),e=e.parentElement}(),{dispose:function(){e(),o=null},start:function(){o&&(o.forEach(function(e){return e.addEventListener("scroll",n)}),window.addEventListener("scroll",n))},stop:e}}var B=function(e,t){return{left:Math.max(e.left,t.left),top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom)}},P=function(e){var t,n=e.getBoundingClientRect(),n={left:n.left,right:n.right,top:n.top,bottom:n.bottom};return N(e,"x")&&!T(e,"x")&&(t=n.right-n.left,n.right=n.right+e.scrollWidth-t),N(e,"y")&&!T(e,"y")&&(t=n.bottom-n.top,n.bottom=n.bottom+e.scrollHeight-t),n},T=function(e,t){var n=window.getComputedStyle(e),e=n.overflow,t=n["overflow-".concat(t)];return"auto"===e||"scroll"===e||"hidden"===e||("auto"===t||"scroll"===t||"hidden"===t)},N=function(e,t){return"x"===t?e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight},L=function(e,t){for(var n=e,o=t||P(e),n=e.parentElement;n;)N(n,"x")&&T(n,"x")&&(o=R(o,n.getBoundingClientRect(),"x")),N(n,"y")&&T(n,"y")&&(o=R(o,n.getBoundingClientRect(),"y")),n=n.parentElement;return o},M=function(e,n){for(var o=e;o;){if(o[i]){var t=function(){var t=o[i];if(n.some(function(e){return e===t}))return{v:t}}();if("object"===S(t))return t.v}o=o.parentElement}return null};var j=function(e,t){for(var n=e;n;){if(function(e,t){for(var n=(e.document||e.ownerDocument).querySelectorAll(t),o=n.length;0<=--o&&n.item(o)!==e;);return-1<o}(n,t))return n;n=n.parentElement}return null},_=function(e,t){return-1<(e.className+"").split(" ").map(function(e){return e}).indexOf(t)},F=function(e,t){var n;!e||-1===(n=(e.className+"").split(" ").filter(function(e){return e})).indexOf(t)&&(n.unshift(t),e.className=n.join(" "))},V=function(e,t){var n;e&&(n=(e.className+"").split(" ").filter(function(e){return e&&e!==t}),e.className=n.join(" "))},H=function(e,t){return e.removeChild(e.children[t])},X=function(e,t,n){n>=e.children.length?e.appendChild(t):e.insertBefore(t,e.children[n])},k=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():window.document.selection&&window.document.selection.empty()},G=function(e){if(e){e=window.getComputedStyle(e);if(e)return e.cursor}return null};function W(e){return!(e.bottom<=e.top||e.right<=e.left)}function Y(e,t,n){t=function(e,t,n){for(var n=2<arguments.length&&void 0!==n?n:-1,o=e.length,i=0;i<o;++i)if(t(e[i],i,e))return i;return n}(e,t);return-1<t?e[t]:n}function q(e){for(var t,n=e.childNodes,o=0;t=n[o++];)if(1===t.nodeType)return t;return null}function U(e){var a=e.element,l=e.draggables;return function(e,t){var n=e.removedIndex,o=e.addedIndex,i=e.droppedElement,r=null;null!==n&&(r=H(a,n),l.splice(n,1)),null!==o&&((n=window.document.createElement("div")).className="".concat(v),n.appendChild(r&&q(r)?q(r):i),X(a,n,o),o>=l.length?l.push(n):l.splice(o,0,n)),t&&t(e)}}var $=Object.freeze({domDropHandler:U,reactDropHandler:function(){return{handler:function(){return function(e,t){t&&t(e)}}}}}),J={size:"offsetWidth",distanceToParent:"offsetLeft",translate:"transform",begin:"left",end:"right",dragPosition:"x",scrollSize:"scrollWidth",offsetSize:"offsetWidth",scrollValue:"scrollLeft",scale:"scaleX",setSize:"width",setters:{translate:function(e){return"translate3d(".concat(e,"px, 0, 0)")}}},K={size:"offsetHeight",distanceToParent:"offsetTop",translate:"transform",begin:"top",end:"bottom",dragPosition:"y",scrollSize:"scrollHeight",offsetSize:"offsetHeight",scrollValue:"scrollTop",scale:"scaleY",setSize:"height",setters:{translate:function(e){return"translate3d(0,".concat(e,"px, 0)")}}};function Q(o){return{get:function(e,t){return e[o[t]||t]},set:function(e,t,n){e[o[t]]=o.setters[t]?o.setters[t](n):n}}}function Z(n,l){n[c]=0;var o=Q("horizontal"===l?J:K),s={translation:0};function e(){var e,t;i(n),t=(e=n).getBoundingClientRect(),s.scaleX=e.offsetWidth?(t.right-t.left)/e.offsetWidth:1,s.scaleY=e.offsetHeight?(t.bottom-t.top)/e.offsetHeight:1}function i(e){s.rect=P(e);e=L(e,s.rect);W(e)&&(s.lastVisibleRect=s.visibleRect),s.visibleRect=e}function r(e){if(e.tagName){var t=e.getBoundingClientRect();return"vertical"===l?t.bottom-t.top:t.right-t.left}return o.get(e,"size")*o.get(s,"scale")}function t(e){return o.get(e,"dragPosition")}return window.addEventListener("resize",function(){i(n)}),setTimeout(function(){e()},10),{getSize:r,getContainerRectangles:function(){return{rect:s.rect,visibleRect:s.visibleRect,lastVisibleRect:s.lastVisibleRect}},getBeginEndOfDOMRect:function(e){return{begin:o.get(e,"begin"),end:o.get(e,"end")}},getBeginEndOfContainer:function(){return{begin:o.get(s.rect,"begin")+s.translation,end:o.get(s.rect,"end")+s.translation}},getBeginEndOfContainerVisibleRect:function(){return{begin:o.get(s.visibleRect,"begin")+s.translation,end:o.get(s.visibleRect,"end")+s.translation}},getBeginEnd:function(e){var t=(t=e,(o.get(t,"distanceToParent")+(t[u]||0))*o.get(s,"scale")+(o.get(s.rect,"begin")+s.translation)-o.get(n,"scrollValue"));return{begin:t,end:t+r(e)*o.get(s,"scale")}},getAxisValue:t,setTranslation:function(e,t){t?o.set(e.style,"translate",t):e.style.removeProperty("transform"),e[u]=t},getTranslation:function(e){return e[u]},setVisibility:function(e,t){void 0!==e[a]&&e[a]===t||(t?e.style.removeProperty("visibility"):e.style.visibility="hidden",e[a]=t)},isVisible:function(e){return void 0===e[a]||e[a]},isInVisibleRect:function(e,t){var n=s.visibleRect,o=n.left,i=n.top,r=n.right,a=n.bottom;return a-i<2&&(a=i+30),n=s.rect,"vertical"===l?e>n.left&&e<n.right&&i<t&&t<a:o<e&&e<r&&t>n.top&&t<n.bottom},setSize:function(e,t){o.set(e,"setSize",t)},getTopLeftOfElementBegin:function(e){var t=0;return{top:"horizontal"===l?(t=e,s.rect.top):(t=s.rect.left,e),left:t}},getScrollSize:function(e){return o.get(e,"scrollSize")},getScrollValue:function(e){return o.get(e,"scrollValue")},setScrollValue:function(e,t){return o.set(e,"scrollValue",t)},invalidate:e,invalidateRects:function(){i(n)},getPosition:t,setBegin:function(e,t){o.set(e,"begin",t)}}}function ee(e,t,n){var o,i,r=n.left,a=n.right,l=n.top,s=n.bottom,n=e.x,e=e.y;if(n<r||a<n||e<l||s<e)return null;s="x"===t?(o=r,i=a,n):(o=l,i=s,e),e=i-o,e=400<e?100:e/4;return i-s<e?{direction:"end",speedFactor:(e-(i-s))/e}:s-o<e?{direction:"begin",speedFactor:(e-(s-o))/e}:null}function te(e,t,n){e&&(e!==window?"x"===t?e.scrollLeft+=n:e.scrollTop+=n:"x"===t?e.scrollBy(n,0):e.scrollBy(0,n))}function ne(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"y",r=null,a=null,l=null,s=null;return{animate:function(e,t){l=e,s=t,function n(){null===r&&(r=requestAnimationFrame(function(e){var t=e-(a=null===a?e:a);a=e;var t=t/1e3*s;te(o,i,t="begin"===l?0-t:t),r=null,n()}))}()},stop:function(){null!==r&&(cancelAnimationFrame(r),r=null),a=null}}}function oe(e){for(var t=[],n=e.element;n;){var o=function(e){var t=window.getComputedStyle(e),e=t.overflow;if("auto"===e||"scroll"===e)return r.xy;e=t["overflow-x"],e="auto"===e||"scroll"===e,t=t["overflow-y"],t="auto"===t||"scroll"===t;return e&&t?r.xy:e?r.x:t?r.y:null}(n);if(o&&!_(n,g)){var i={};switch(o){case r.xy:i.x={animator:ne(n,"x")},i.y={animator:ne(n,"y")};break;case r.x:i.x={animator:ne(n,"x")};break;case r.y:i.y={animator:ne(n,"y")}}t.push({axisAnimations:i,getRect:function(e){return function(){return L(e,e.getBoundingClientRect())}}(n),scrollerElement:n})}n=n.parentElement}return t}var ie,re=function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1500,r=e.reduce(function(e,t){t=oe(t).filter(function(t){return!e.find(function(e){return e.scrollerElement===t.scrollerElement})});return[].concat(O(e),O(t))},[]);return function(e){var t,o,n=e.draggableInfo;e.reset?r.forEach(function(e){e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y&&e.axisAnimations.y.animator.stop()}):n&&(e=r,o=n.mousePosition,e.forEach(function(e){var t=e.axisAnimations,n=(0,e.getRect)();t.x&&(t.x.scrollParams=ee(o,"x",n),e.cachedRect=n),t.y&&(t.y.scrollParams=ee(o,"y",n),e.cachedRect=n)}),r.forEach(function(e){var t,n=e.axisAnimations,o=n.x,e=n.y;o&&(o.scrollParams?(n=(t=o.scrollParams).direction,t=t.speedFactor,o.animator.animate(n,t*i)):o.animator.stop()),e&&(e.scrollParams?(o=(t=e.scrollParams).direction,t=t.speedFactor,e.animator.animate(o,t*i)):e.animator.stop())}),(e=r.filter(function(e){return e.cachedRect})).length&&1<e.length&&((t=function(e,t){for(var n=document.elementFromPoint(t.x,t.y);n;){var o=e.find(function(e){return e.scrollerElement===n});if(o)return o;n=n.parentElement}return null}(e,n.mousePosition))&&e.forEach(function(e){e!==t&&(e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y&&e.axisAnimations.y.animator.stop())})))}},ae={display:"block"},le={height:"100%",display:"table-cell","vertical-align":"top"},se=(n(ie={},".".concat(y),{position:"relative","min-height":"30px","min-width":"30px"}),n(ie,".".concat(y,".horizontal"),{display:"table"}),n(ie,".".concat(y,".horizontal > .").concat(d),{display:"inline-block"}),n(ie,".".concat(y,".horizontal > .").concat(v),le),n(ie,".".concat(y,".vertical > .").concat(v),ae),n(ie,".".concat(v),{"box-sizing":"border-box"}),n(ie,".".concat(v,".horizontal"),le),n(ie,".".concat(v,".vertical"),ae),n(ie,".".concat(v,".animated"),{transition:"transform ease"}),n(ie,".".concat(h),{"box-sizing":"border-box"}),n(ie,".".concat(h,".animated"),{transition:"all ease-in-out"}),n(ie,".".concat(h," *"),{"pointer-events":"none"}),n(ie,".".concat(l," *"),{"touch-action":"none","-ms-touch-action":"none"}),n(ie,".".concat(s),{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),n(ie,".".concat(m),{flex:"1"}),n(ie,".".concat(y,".horizontal > .").concat(b),{height:"100%",display:"table-cell","vertical-align":"top"}),n(ie,".".concat(y,".vertical > .").concat(b),{display:"block",width:"100%"}),n(ie,".".concat(x),{width:"100%",height:"100%",display:"flex","justify-content":"stretch","align-items":"stretch"}),n(ie,".".concat(p),{"background-color":"rgba(150, 150, 150, 0.1)",border:"1px solid #ccc"}),n(ie,".".concat(w),{position:"fixed","border-color":"#5874d8","border-width":"0","z-index":"1001"}),n(ie,".".concat(w,".bold"),{"border-style":"solid"}),n(ie,".".concat(w,".dashed"),{"border-style":"dashed"}),n(ie,".".concat(w,".horizontal"),{"border-top-width":"1px"}),n(ie,".".concat(w,".vertical"),{"border-left-width":"1px"}),ie);function ue(o){return Object.keys(o).reduce(function(e,t){var n=o[t];return"object"===S(n)?"".concat(e).concat(t,"{").concat(ue(n),"}"):"".concat(e).concat(t,":").concat(n,";")},"")}function ce(e){if(e&&"undefined"!=typeof window){var t=window.document.head||window.document.getElementsByTagName("head")[0],n=window.document.createElement("style"),e=ue({"body *":{cursor:"".concat(e," !important")}});return n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(window.document.createTextNode(e)),t.appendChild(n),n}return null}function de(t,e,n){var o=2<arguments.length&&void 0!==n?n:{},i=["top","bottom"];(n=["left","right"]).push("center"),i.push("middle");n=n.filter(function(e){return e in t}),i=i.filter(function(e){return e in t}),n=n.map(function(e){return t[e]}),i=i.map(function(e){return t[e]});return{vertical:fe(e,"vertical",n,o),horizontal:fe(e,"horizontal",i,o)}}function fe(o,i,e,t){var t=(3<arguments.length&&void 0!==t?t:{}).snapThreshold,r=void 0===t?5:t;if(!o||!o.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,t=e.map(function(n,e){var t=o.map(function(e){var t=e.pos,t=n-t[a];return{offset:t,dist:Math.abs(t),guideline:e}}).filter(function(e){var t=e.guideline,e=e.dist;return!(t.type!==i||r<e)}).sort(function(e,t){return e.dist-t.dist});return{pos:n,index:e,guidelineInfos:t}}).filter(function(e){return 0<e.guidelineInfos.length}).sort(function(e,t){return e.guidelineInfos[0].dist-t.guidelineInfos[0].dist}),e=0<t.length;return{isSnap:e,index:e?t[0].index:-1,posInfos:t}}function ge(e){var t=[];return e.forEach(function(e){e.guidelineInfos.forEach(function(e){e=e.guideline;-1<t.indexOf(e)||t.push(e)})}),t}function pe(e,t,n,o){n=e-n,o=n<0?n+t:o;return{size:(n<0?0:n)-o,pos:o}}function me(e,i,n,r){var a,l,s,u,c=[],e=(l=function(e){var n=e.element,t=e.pos,o=t[r],e=Math.min(0,o-i)<0?-1:1,e="".concat(e,"_").concat(t[r?0:1]),t=Y(c,function(e){var t=C(e,2),e=t[0],t=t[1];return n===e&&o===t});return t?t[2]:(c.push([n,o,e]),e)},s=[],u=[],(a=e).forEach(function(e,t){var n=l(e,t,a),o=u.indexOf(n),t=s[o]||[];-1===o&&(u.push(n),s.push(t)),t.push(e)}),s);return e.forEach(function(e){e.sort(function(e,t){return pe(e.pos[r],e.size,i,n).size-pe(t.pos[r],e.size,i,n).size||e.pos[r?0:1]-t.pos[r?0:1]})}),e}function he(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=e.posInfos[0],o=n.guidelineInfos[0],i=o.offset,e=o.dist,o=o.guideline;return{isSnap:t,offset:i,dist:e,pos:n.pos,guideline:o}}function ve(e,t,n){var o=e.ghost.getBoundingClientRect(),t=void 0!==t?t:e.topLeft.x,e=void 0!==n?n:e.topLeft.y;return{left:t,top:e,right:t+o.width,bottom:e+o.height,width:o.width,height:o.height,middle:e+o.height/2,center:t+o.width/2}}var ye=["horizontal","left","top","width"],be=["vertical","top","left","height"];function xe(s,u){var d=null,c=[];function f(e,t,i){var t=C(t,4),r=t[0],a=t[1],l=t[2],s=t[3];return e.map(function(e,t){var n=e.pos,o=e.size,e=document.createElement("div");F(e,"".concat(w," guideline bold ").concat(r)),e.style[a]="".concat(n[i],"px"),e.style[l]="".concat(n[i?0:1],"px"),e.style[s]="".concat(o,"px"),d&&d.appendChild(e)})}function g(e,t,n,o){var t=C(t,4),i=t[0],r=t[1],a=t[2],l=t[3];return e.map(function(e){var t=e.pos,e=document.createElement("div");F(e,"".concat(w," bold snap-pose ").concat(i)),e.style[r]="".concat(n,"px"),e.style[a]="".concat(t,"px"),e.style[l]="".concat(o,"px"),d&&d.appendChild(e)})}function p(e,t,i,r,a){var t=C(t,4),l=t[0],s=t[1],u=t[2],c=t[3];e.forEach(function(e,t){e.forEach(function(e){var t=e.pos,n=e.size,o=pe(t[a],n,i,r),e=o.pos,n=o.size,o=document.createElement("div");F(o,"".concat(w," dashed size-value ").concat(l)),o.style[s]="".concat(i+e,"px"),o.style[u]="".concat(t[a?0:1],"px"),o.style[c]="".concat(n,"px"),d&&d.appendChild(o)})})}return{dragStart:function(){d=document.createElement("div"),document.body.appendChild(d)},drag:function(t){var e,n,o,i,r,a,l;(c=(c=function(e,t){var f=void 0===(t=(1<arguments.length&&void 0!==t?t:{}).snapCenter)||t,g=[];return e.length&&e.map(function(e){return"parentElement"in e?{element:e}:e}).forEach(function(e){var t=e.element,n=e.left,o=e.top,i=e.right,r=e.bottom,a=t.getBoundingClientRect(),l=a.left,s=a.top,u=a.right,c=a.bottom,d=a.width,e=a.height,a=[d,e];!1!==o&&g.push({type:"vertical",element:t,pos:[l,s],size:e,sizes:a}),!1!==r&&g.push({type:"vertical",element:t,pos:[u,s],size:e,sizes:a}),!1!==n&&g.push({type:"horizontal",element:t,pos:[l,s],size:d,sizes:a}),!1!==i&&g.push({type:"horizontal",element:t,pos:[l,c],size:d,sizes:a}),f&&(g.push({type:"vertical",element:t,pos:[(l+u)/2,s],size:e,sizes:a,center:!0}),g.push({type:"horizontal",element:t,pos:[l,(s+c)/2],size:d,sizes:a,center:!0}))}),g}(u)).filter(function(e){e=e.element;return e!==s.element&&e!==t.ghost})).length&&(l=[],e=ve(t),l.push(de(e,c,{snapThreshold:0})),n=[],o=[],i=[],r=[],l.forEach(function(e){var t=e.vertical.posInfos,e=e.horizontal.posInfos;n.push.apply(n,O(t.map(function(e){return{type:"snap",pos:e.pos}}))),o.push.apply(o,O(e.map(function(e){return{type:"snap",pos:e.pos}}))),i.push.apply(i,O(ge(t))),r.push.apply(r,O(ge(e)))}),a=me(r,e.left,e.width,0),l=me(i,e.top,e.height,1),d&&(d.innerHTML=""),f(r,ye,0),f(i,be,1),g(o,ye,e.left,e.width),g(n,be,e.top,e.height),p(a,ye,e.left,e.width,0),p(l,be,e.top,e.height,1))},dragEnd:function(){d&&(d.parentNode&&d.parentNode.removeChild(d),d=null),c=[]},checkSnapDrag:function(e,t,n){return e=de(ve(e,t,n),c),t=e.horizontal,n=he(e.vertical),e=n.isSnap,n=n.offset,t=he(t),[{isSnap:e,offset:n},{isSnap:t.isSnap,offset:t.offset}]}}}var we,Ee,Se=["mousedown","touchstart"],Ce=["mousemove","touchmove"],Oe=["mouseup","touchend"],De={lt:[-1,-1],lc:[-1,0],lb:[-1,1],ct:[0,-1],cc:[0,0],cb:[0,1],rt:[1,-1],rc:[1,0],rb:[1,1]},ze=null,Re=null,Ie=null,Ae=null,Be=null,Pe=[],Te=!1,Ne=!1,Le=!1,Me=!1,je=null,_e=null,Fe=null,Ve=null,He=(we=null,Ee=!1,{start:function(){Ee||(Ee=!0,function e(){we=requestAnimationFrame(function(){ze.forEach(function(e){return e.layout.invalidateRects()}),setTimeout(function(){null!==we&&e()},50)})}())},stop:function(){null!==we&&(cancelAnimationFrame(we),we=null),Ee=!1}}),Xe="undefined"!=typeof window&&!!(window.navigator.userAgent.match(/Android/i)||window.navigator.userAgent.match(/webOS/i)||window.navigator.userAgent.match(/iPhone/i)||window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPod/i)||window.navigator.userAgent.match(/BlackBerry/i)||window.navigator.userAgent.match(/Windows Phone/i));function ke(){"undefined"!=typeof window&&Se.forEach(function(e){window.document.addEventListener(e,ot,{passive:!1})})}function Ge(){return Be&&Be.ghostParent?Be.ghostParent:Re&&Re.parentElement||window.document.body}var We,Ye,qe,Ue,$e,Je,Ke=($e=1,Je=5,function(e,t,n){We=ft(e),qe=n,(Ye="number"==typeof t?t:Xe?200:0)&&(Ue=setTimeout(nt,Ye)),Ce.forEach(function(e){return window.document.addEventListener(e,Qe)},{passive:!1}),Oe.forEach(function(e){return window.document.addEventListener(e,Ze)},{passive:!1}),window.document.addEventListener("drag",et,{passive:!1})});function Qe(e){var t=ft(e),e=t.clientX,t=t.clientY;if(Ye)(Math.abs(We.clientX-e)>Je||Math.abs(We.clientY-t)>Je)&&tt();else if(Math.abs(We.clientX-e)>$e||Math.abs(We.clientY-t)>$e)return nt()}function Ze(){tt()}function et(){tt()}function tt(){clearTimeout(Ue),Ce.forEach(function(e){return window.document.removeEventListener(e,Qe)},{passive:!1}),Oe.forEach(function(e){return window.document.removeEventListener(e,Ze)},{passive:!1}),window.document.removeEventListener("drag",et,{passive:!1})}function nt(){clearTimeout(Ue),tt(),qe()}function ot(e){var t,n,o,i,r,a=ft(e);Te||void 0!==a.button&&0!==a.button||(Re=j(a.target,"."+v))&&(t=j(Re,"."+y),i=(n=Pe.filter(function(e){return e.element===t})[0]).getOptions().disabled,o=n.getOptions().dragHandleSelector,r=n.getOptions().nonDragAreaSelector,i=!i,o&&!j(a.target,o)&&(i=!1),(i=r&&j(a.target,r)?!1:i)&&(n.layout.invalidate(),F(window.document.body,l),F(window.document.body,s),r=function e(){V(window.document.body,l),V(window.document.body,s),window.document.removeEventListener("mouseup",e)},window.document.addEventListener("mouseup",r)),i&&Ke(a,n.getOptions().dragBeginDelay,function(){k(),vt(a,G(e.target)),Ce.forEach(function(e){window.document.addEventListener(e,it,{passive:!1})}),Oe.forEach(function(e){window.document.addEventListener(e,dt,{passive:!1})})}))}function it(e){e.preventDefault();var t,n,o,i,r,a,l=ft(e);Be?Ie&&(i=l.clientX,r=l.clientY,Ae&&(t=i+Ie.positionDelta.left,n=r+Ie.positionDelta.top,o=(a=C(Ae.checkSnapDrag(Ie,t,n),2))[0],a=a[1],o=o.offset,a=a.offset,i=t-o-Ie.positionDelta.left,r=n-a-Ie.positionDelta.top),"contain"===(a=Be.container.getOptions()).behaviour?function(e,t){var n,o,i=e.clientX,r=e.clientY,e=1<arguments.length&&void 0!==t?t:"vertical",t=Be.container.layout.getBeginEndOfContainerVisibleRect(),e="vertical"===e?(n=r,o="y",a="top",Be.size.offsetHeight):(n=i,o="x",a="left",Be.size.offsetWidth),r=t.begin,i=t.end-e,a=Math.max(r,Math.min(i,n+Ie.positionDelta[a]));Ie.topLeft[o]=a,Be.position[o]=Math.max(t.begin,Math.min(t.end,n+Ie.centerDelta[o])),Be.mousePosition[o]=Math.max(t.begin,Math.min(t.end,n)),Be.position[o]<t.begin+e/2&&(Be.position[o]=t.begin+2),Be.position[o]>t.end-e/2&&(Be.position[o]=t.end-2)}({clientX:i,clientY:r},a.orientation):Fe?"y"===Fe?(Ie.topLeft.y=r+Ie.positionDelta.top,Be.position.y=r+Ie.centerDelta.y,Be.mousePosition.y=r):"x"===Fe&&(Ie.topLeft.x=i+Ie.positionDelta.left,Be.position.x=i+Ie.centerDelta.x,Be.mousePosition.x=i):(Ie.topLeft.x=i+Ie.positionDelta.left,Ie.topLeft.y=r+Ie.positionDelta.top,Be.position.x=i+Ie.centerDelta.x,Be.position.y=r+Ie.centerDelta.y,Be.mousePosition.x=i,Be.mousePosition.y=r),Et(),(Me=!je(Be))&&ut()):vt(l,G(e.target))}var rt,at,lt,st,ut=(rt=ct,lt=!(at=20),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];st&&clearTimeout(st),lt&&!st?rt.call.apply(rt,[null].concat(t)):st=setTimeout(function(){st=null,rt.call.apply(rt,[null].concat(t))},at)});function ct(){Me&&(Me=!1,gt(Be,ze))}function dt(){var e,t,n,o,i;function r(){V(Ie.ghost,"animated"),Ie.ghost.style.transitionDuration=null,Ge().removeChild(Ie.ghost),e()}function a(e,t,n){var o=e.top,e=e.left;F(Ie.ghost,"animated"),n&&F(q(Ie.ghost),n),Ie.topLeft.x=e,Ie.topLeft.y=o,Et(t),setTimeout(function(){r()},t+20)}function l(e,t){F(Ie.ghost,"animated"),Et(e,.9,!0),setTimeout(function(){t()},e+20)}Ce.forEach(function(e){window.document.removeEventListener(e,it,{passive:!1})}),Oe.forEach(function(e){window.document.removeEventListener(e,dt,{passive:!1})}),_e({reset:!0}),Ve&&((n=Ve)&&"undefined"!=typeof window&&(window.document.head||window.document.getElementsByTagName("head")[0]).removeChild(n),Ve=null),Ae&&(Ae.dragEnd(),Ae=null),Be&&(He.stop(),ct(),Le=!0,e=function(){ht(Te=!1);for(var e=ze||[],t=e.shift();void 0!==t;)t.handleDrop(Be),t=e.shift();je=Fe=Be=Ie=Re=ze=null,Le=!1},Be.targetElement?(o=Pe.filter(function(e){return e.element===Be.targetElement})[0],!(i=o.getOptions()).shouldAnimateDrop||i.shouldAnimateDrop(Be.container.getOptions(),Be.payload)?a(o.getDragResult().shadowBeginEnd.rect,Math.max(150,o.getOptions().animationDuration/2),o.getOptions().dropClass):r()):(t=Pe.filter(function(e){return e===Be.container})[0])?(i=(n=t.getOptions()).behaviour,o=n.removeOnDropOut,"move"!==i&&"contain"!==i||!Ne&&o||!t.getDragResult()?l(t.getOptions().animationDuration,r):!W((n=t.layout.getContainerRectangles()).visibleRect)&&W(n.lastVisibleRect)?a({top:n.lastVisibleRect.top,left:n.lastVisibleRect.left},t.getOptions().animationDuration,t.getOptions().dropClass):(o=(i=t.getDragResult()).removedIndex,n=i.elementSize,i=t.layout,t.getTranslateCalculator({dragResult:{removedIndex:o,addedIndex:o,elementSize:n,pos:void 0,shadowBeginEnd:void 0}}),o=0<o?i.getBeginEnd(t.draggables[o-1]).end:i.getBeginEndOfContainer().begin,a(i.getTopLeftOfElementBegin(o),t.getOptions().animationDuration,t.getOptions().dropClass))):l(E.animationDuration,r))}function ft(e){return e.touches?e.touches[0]:e}function gt(t,e){var n=!1;e.forEach(function(e){e=e.handleDrag(t);n=!!e.containerBoxChanged||!1,e.containerBoxChanged=!1}),n&&(n=!1,requestAnimationFrame(function(){Pe.forEach(function(e){e.layout.invalidateRects(),e.onTranslated()})}))}function pt(e){var t=e,n=null;return function(e){return!(null!==n||!Te||Le)&&(n=requestAnimationFrame(function(){Te&&!Le&&(gt(e,t),_e({draggableInfo:e}),Ae&&Ae.drag(Ie)),n=null}),!0)}}function mt(e,t){return e.getOptions().autoScrollEnabled?re(t,e.getScrollMaxSpeed()):function(e){return null}}function ht(o){Pe.forEach(function(e){var t,n=o?e.getOptions().onDragStart:e.getOptions().onDragEnd;n&&(t={isSource:e===Be.container,payload:Be.payload},e.isDragRelevant(Be.container,Be.payload)?t.willAcceptDrop=!0:t.willAcceptDrop=!1,n(t))})}function vt(e,t){var n,o,i,r,a;null!==Re&&(Te=!0,(r=Pe.filter(function(e){return Re.parentElement===e.element})[0]).setDraggables(),a=r.getOptions(),Fe=a.lockAxis?a.lockAxis.toLowerCase():null,o=Re,i=Pe.filter(function(e){return o.parentElement===e.element})[0],r=i.draggables.indexOf(o),a=i.getOptions().getGhostParent,Be={container:i,element:o,size:{offsetHeight:0,offsetWidth:0},elementIndex:r,payload:i.getOptions().getChildPayload?i.getOptions().getChildPayload(r):void 0,targetElement:null,position:{x:0,y:0},groupName:i.getOptions().groupName,ghostParent:a?a():null,invalidateShadow:null,mousePosition:null,relevantContainers:null},ht(!0),a=e,e=t,null!==Re&&(n=Pe.filter(function(e){return Re.parentElement===e.element})[0],t=n.getOptions(),Ie=function(e,t,n,o){var i=t.x,r=t.y,a=(m=(n.getOptions(),e.getBoundingClientRect())).left,l=m.top,s=m.right,u=m.bottom,c=B(n.layout.getContainerRectangles().visibleRect,m),d=c.left+(c.right-c.left)/2,f=c.top+(c.bottom-c.top)/2,g=e.cloneNode(!0);g.style.zIndex="1000",g.style.boxSizing="border-box",g.style.position="fixed",g.style.top="0px",g.style.left="0px",g.style.transform=null,g.style.removeProperty("transform"),n.shouldUseTransformForGhost()?g.style.transform="translate3d(".concat(a,"px, ").concat(l,"px, 0)"):(g.style.top="".concat(l,"px"),g.style.left="".concat(a,"px")),g.style.width=s-a+"px",g.style.height=u-l+"px",g.style.overflow="visible",g.style.transition=null,g.style.removeProperty("transition"),g.style.pointerEvents="none",g.style.userSelect="none",n.getOptions().dragClass?setTimeout(function(){F(q(g),n.getOptions().dragClass);var e=window.getComputedStyle(q(g)).cursor;Ve=ce(e)}):Ve=ce(o),F(g,n.getOptions().orientation||"vertical"),F(g,h);var p=0,t=0,m=0,e=0;return(o=n.getOptions().dragOnPoint)&&(0===(o=!0===o?De.cc:De[o])[0]?m=d-i+(p=i-a-(c.right-c.left)/2):o[0]<0?m=a-i+(p=i-a):0<o[0]&&(m=s-i+(p=i-s)),0===o[1]?e=f-r+(t=r-l-(c.bottom-c.top)/2):o[1]<0?e=l-r+(t=r-l):0<o[1]&&(e=u-r+(t=r-u))),{ghost:g,centerDelta:{x:m,y:e},positionDelta:{left:a-i+p,top:l-r+t},topLeft:{x:a+p,y:l+t}}}(Re,{x:a.clientX,y:a.clientY},Be.container,e),e=Re.getBoundingClientRect(),Be.size={offsetHeight:e.bottom-e.top,offsetWidth:e.right-e.left},Be.position={x:a.clientX+Ie.centerDelta.x,y:a.clientY+Ie.centerDelta.y},Be.mousePosition={x:a.clientX,y:a.clientY},ze=Pe.filter(function(e){return e.isDragRelevant(n,Be.payload)}),Be.relevantContainers=ze,je=pt(ze),_e&&_e({reset:!0,draggableInfo:void 0}),_e=mt(n,ze),ze.forEach(function(e){return e.prepareDrag(e,ze)}),je(Be),Ge().appendChild(Ie.ghost),t.snappable&&"drop-zone"===t.behaviour&&(Ae=function(e){var t=e.container.getOptions().elementGuidelines,n=void 0===t?[]:t;return n.length||Pe.forEach(function(e){var t=e.getOptions();t.snappable&&"drop-zone"===t.behaviour&&(e.draggables.forEach(function(e){n.push(e)}),n.push(e.element))}),xe(e,n)}(Be)).dragStart(),He.start()))}var yt,bt,xt,wt=st=Ue=null;function Et(e,t,n){var e=0<arguments.length&&void 0!==e?e:0,t=1<arguments.length&&void 0!==t?t:1,o=2<arguments.length&&void 0!==n&&n,i=Ie.ghost,n=Ie.topLeft,r=n.x,a=n.y,l=!Be.container||Be.container.shouldUseTransformForGhost(),s=l?"translate3d(".concat(r,"px,").concat(a,"px, 0)"):null;if(1!==t&&(s=(s?"".concat(s," scale("):"scale(").concat(t,")")),0<e)return Ie.ghost.style.transitionDuration=e+"ms",void requestAnimationFrame(function(){s&&(i.style.transform=s),l||(i.style.left=r+"px",i.style.top=a+"px"),wt=null,o&&(i.style.opacity="0")});null===wt&&(wt=requestAnimationFrame(function(){s&&(i.style.transform=s),l||(i.style.left=r+"px",i.style.top=a+"px"),wt=null,o&&(i.style.opacity="0")}))}function St(){var t;!Te||Ne||Le||(Me=!(Ne=!0),t=Object.assign({},Be,{targetElement:null,position:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},mousePosition:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER}}),ze.forEach(function(e){e.handleDrag(t)}),Be.targetElement=null,Be.cancelDrop=!0,dt(),Ne=!1)}"undefined"!=typeof window&&"undefined"!=typeof window&&(yt=window.document.head||window.document.getElementsByTagName("head")[0],(bt=window.document.createElement("style")).id="fai-dnd-style-definitions",xt=ue(se),bt.type="text/css",bt.styleSheet?bt.styleSheet.cssText=xt:bt.appendChild(window.document.createTextNode(xt)),yt.appendChild(bt));var Ct=(ke(),{register:function(e){e=e,Pe.push(e),Te&&Be&&e.isDragRelevant(Be.container,Be.payload)&&(ze.push(e),e.prepareDrag(e,ze),_e&&_e({reset:!0,draggableInfo:void 0}),_e=mt(e,ze),je=pt(ze),e.handleDrag(Be))},unregister:function(e){var t;t=e,Pe.splice(Pe.indexOf(t),1),Te&&Be&&(Be.container===t&&t.fireRemoveElement(),Be.targetElement===t.element&&(Be.targetElement=null),-1<(e=ze.indexOf(t))&&(ze.splice(e,1),_e&&_e({reset:!0,draggableInfo:void 0}),_e=mt(t,ze),je=pt(ze)))},isDragging:function(){return Te},cancelDrag:St});function Ot(e,t,n){n=2<arguments.length&&void 0!==n?n:E.animationDuration;t?(F(e,o),e.style.transitionDuration=n+"ms"):(V(e,o),e.style.removeProperty("transition-duration"))}function Dt(n){var o=[];return Array.prototype.forEach.call(n.children,function(e){var t;e.nodeType===Node.ELEMENT_NODE?((t=!_(t=e,v)?function(e){if($t.wrapChild){var t=window.document.createElement("div");return t.className="".concat(v),e.parentElement.insertBefore(t,e),t.appendChild(e),t}return e}(e):t)[u]=0,o.push(t)):n.removeChild(e)}),o}function zt(e){function s(e,t,n,o){var i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(o<n)return n;if(n!==o)return r=Math.floor((o+n)/2),l=u.getBeginEnd(e[r]),a=l.begin,l=l.end,t<a?s(e,t,n,r-1,i):l<t?s(e,t,r+1,o,i):!i||t<(l+a)/2?r:r+1;var r=u.getBeginEnd(e[n]),a=r.begin,l=r.end;return!i||t<(l+a)/2?n:n+1}var u=e.layout;return function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return s(e,t,0,e.length-1,n)}}function Rt(e){var t,n,o,i=e.element,r=e.draggables,a=e.layout,l=e.getOptions,s=(t=(e={element:i,draggables:r,layout:a,getOptions:l}).element,n=e.draggables,o=e.layout,function(){n.forEach(function(e){Ot(e,!1),o.setTranslation(e,0),o.setVisibility(e,!0)}),t[f]&&(t[f].parentNode.removeChild(t[f]),t[f]=null)}),u=($t.dropHandler||U)({element:i,draggables:r,layout:a,getOptions:l});return function(e,t){var n=t.addedIndex,o=t.removedIndex,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];s(),e.cancelDrop||(e.targetElement||l().removeOnDropOut||t)&&(t=null!==n?null!==o&&o<n?n-1:n:null,n=a.getContainerRectangles(),n="drop-zone"===l().behaviour&&null!==t?{x:e.position.x-e.size.offsetWidth/2-n.rect.left,y:e.position.y-e.size.offsetHeight/2-n.rect.top}:null,n={removedIndex:o,addedIndex:t,payload:e.payload,position:n},u(n,l().onDrop))}}function It(e){var n=e.element,o=e.getOptions,i=null;return function(e){var t=e.draggableInfo,e=i;return{removedIndex:e=null==i&&t.container.element===n&&"copy"!==o().behaviour?i=t.elementIndex:e}}}function At(e){var t=e.draggables,n=e.layout;return function(e){e=e.dragResult;null!==e.removedIndex&&n.setVisibility(t[e.removedIndex],!1)}}function Bt(e){var i=e.element,r=e.layout;return function(e){for(var t=e.draggableInfo,n=document.elementFromPoint(t.position.x,t.position.y),o=[];n&&_(n,w);)o.push({hitElement:n,display:n.style.display}),n.style.display="none",n=document.elementFromPoint(t.position.x,t.position.y);if(o.forEach(function(e){var t=e.hitElement,e=e.display;t.style.display=e}),n){e=M(n,t.relevantContainers);if(e&&e.element===i)return{pos:r.getPosition(t.position)}}return{pos:null}}}function Pt(e){var n=e.layout,o=null;return function(e){var t=e.draggableInfo;return null===e.dragResult.pos?o=null:{elementSize:o=o||n.getSize(t.size)}}}function Tt(e){var n=e.element;return function(e){var t=e.draggableInfo,e=e.dragResult;!function(e,t,n){t&&(!(2<arguments.length&&void 0!==n)||n)?e.targetElement=t:e.targetElement===t&&(e.targetElement=null)}(t,n,!!e.pos)}}function Nt(){return function(e){return null!==e.dragResult.pos?{addedIndex:0}:{addedIndex:null}}}function Lt(e){var n=e.layout,o=null;return function(e){var t=e.dragResult.addedIndex;if(t===o)return null;o=t;e=n.getBeginEndOfContainer(),t=e.begin,e.end;return{shadowBeginEnd:{rect:n.getTopLeftOfElementBegin(t)}}}}function Mt(e){var u=e.layout,c=e.element,d=e.getOptions,f=null;return function(e){var t=e.dragResult,n=t.elementSize,o=t.shadowBeginEnd,i=t.addedIndex,r=t.dropPlaceholderContainer,a=d();if(a.dropPlaceholder){var l="boolean"==typeof a.dropPlaceholder?{}:a.dropPlaceholder,s=l.animationDuration,e=l.className,t=l.showOnTop;return null===i?(r&&null!==f&&c.removeChild(r),f=null,{dropPlaceholderContainer:void 0}):(r||(a=document.createElement("div"),(l=document.createElement("div")).className=x,a.className="".concat(m," ").concat(e||p),(r=document.createElement("div")).className="".concat(b),r.style.position="absolute",void 0!==s&&(r.style.transition="all ".concat(s,"ms ease")),r.appendChild(l),l.appendChild(a),u.setSize(r.style,n+"px"),r.style.pointerEvents="none",t?c.appendChild(r):c.insertBefore(r,q(c))),f!==i&&o.dropArea&&u.setBegin(r.style,o.dropArea.begin-u.getBeginEndOfContainer().begin+"px"),f=i,{dropPlaceholderContainer:r})}return null}}function jt(e){var n=Xt(e);return function(e){var t=e.draggableInfo,e=e.dragResult;return t.invalidateShadow?n({draggableInfo:t,dragResult:e}):null}}function _t(e){var n,o,i=(n=(e=e).draggables,o=zt({layout:e.layout}),function(e){var t=e.dragResult,e=t.shadowBeginEnd,t=t.pos;if(e)return e.begin+e.beginAdjustment<=t&&e.end>=t?null:t<e.begin+e.beginAdjustment?o(n,t):t>e.end?o(n,t)+1:n.length;t=o(n,t,!0);return null!==t?t:n.length});return function(e){var t=e.dragResult,e=null;return{addedIndex:e=null!==t.pos&&null===(e=i({dragResult:t}))?t.addedIndex:e}}}function Ft(){var n=null;return function(e){var t=e.dragResult,e=t.addedIndex,t=t.shadowBeginEnd;e!==n&&null!==n&&t&&(t.beginAdjustment=0),n=e}}function Vt(e){var i=e.element,r=e.draggables,a=e.layout,l=e.getOptions,s=null;return function(e){var t=e.dragResult,n=t.addedIndex,e=t.removedIndex,t=t.elementSize;if(null===e)if(null!==n){if(!s){e=a.getBeginEndOfContainer();e.end=e.begin+a.getSize(i);n=a.getScrollSize(i)>a.getSize(i)?e.begin+a.getScrollSize(i)-a.getScrollValue(i):e.end,e=0<r.length?a.getBeginEnd(r[r.length-1]).end-r[r.length-1][u]:e.begin;if(n<e+t){(s=window.document.createElement("div")).className=d+" "+l().orientation;var o=0<r.length?t+e-n:t;return a.setSize(s.style,"".concat(o,"px")),i.appendChild(s),i[f]=s,{containerBoxChanged:!0}}}}else if(s){a.setTranslation(s,0);o=s;return s=null,i.removeChild(o),{containerBoxChanged:!(i[f]=null)}}}}function Ht(e){var l=e.draggables,s=e.layout,u=null,c=null;return function(e){var e=e.dragResult,t=e.addedIndex,n=e.removedIndex,o=e.elementSize;if(t!==u||n!==c){for(var i,r,a=0;a<l.length;a++)a!==n&&(i=l[a],r=0,null!==n&&n<a&&(r-=o),null!==t&&t<=a&&(r+=o),s.setTranslation(i,r));return{addedIndex:u=t,removedIndex:c=n}}}}function Xt(e){var f=e.draggables,g=e.layout,p=null;return function(e){var t=e.draggableInfo,n=e.dragResult,o=n.addedIndex,i=n.removedIndex,r=n.elementSize,a=n.pos,l=n.shadowBeginEnd;if(null===a)return{shadowBeginEnd:p=null};if(null===o||!t.invalidateShadow&&o===p)return null;var s=o-1,u=Number.MIN_SAFE_INTEGER,e=0,n=0,a=null,t=null;s===i&&s--;var e=-1<s?(c=g.getSize(f[s]),t=g.getBeginEnd(f[s]),u=r<c?(d=(c-r)/2,t.end-d):t.end,t.end):(t={end:g.getBeginEndOfContainer().begin},g.getBeginEndOfContainer().begin),c=Number.MAX_SAFE_INTEGER,d=o;d===i&&d++;n=d<f.length?(i=g.getSize(f[d]),a=g.getBeginEnd(f[d]),c=r<i?(r=(i-r)/2,a.begin+r):a.begin,a.begin):(a={begin:g.getContainerRectangles().rect.end},g.getContainerRectangles().rect.end-g.getContainerRectangles().rect.begin),t=t&&a?g.getTopLeftOfElementBegin(t.end):null;return p=o,{shadowBeginEnd:{dropArea:{begin:e,end:n},begin:u,end:c,rect:t,beginAdjustment:l?l.beginAdjustment:0}}}}function kt(){var o=null;return function(e){var t=e.dragResult,n=t.pos,e=t.addedIndex,t=t.shadowBeginEnd;null!==n?null!=e&&null===o&&(n<t.begin&&(n=n-t.begin-5,t.beginAdjustment=n),o=e):o=null}}function Gt(e){var e=e.getOptions,t=!1,n=e();return function(e){e=!!e.dragResult.pos;e!==t&&((t=e)?n.onDragEnter&&n.onDragEnter():n.onDragLeave&&n.onDragLeave())}}function Wt(e){var e=e.getOptions,r=null,a=e();return function(e){var t=e.dragResult,n=t.addedIndex,o=t.removedIndex,i=e.draggableInfo,t=i.payload,e=i.element;a.onDropReady&&null!==n&&r!==n&&(i=r=n,null!==o&&o<n&&i--,a.onDropReady({addedIndex:i,removedIndex:o,payload:t,element:e?q(e):void 0}))}}function Yt(e){return"drop-zone"===e.getOptions().behaviour?qt(e)(It,At,Bt,Pt,Tt,Nt,Lt,Gt,Wt):qt(e)(It,At,Bt,Pt,Tt,jt,_t,Ft,Vt,Ht,Xt,Mt,kt,Gt,Wt)}function qt(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.map(function(e){return e(r)}),i=null;return function(n){return i=o.reduce(function(e,t){return Object.assign(e,t({draggableInfo:n,dragResult:e}))},i||{addedIndex:null,removedIndex:null,elementSize:null,pos:null,shadowBeginEnd:null})}}}function Ut(h){return function(e){var t,n,o,i,r,a=Object.assign({},E,e),l=null,s=null,u=(n=m,o=Dt(t=h),e=n(),F(t,"".concat(y," ").concat(e.orientation)),{element:t,draggables:o,getOptions:n,layout:Z(t,e.orientation,e.animationDuration)}),c=Yt(u),d=Rt(u),f=A(h,function(){u.layout.invalidateRects(),g()});function g(){null!==s&&(s.invalidateShadow=!0,l=c(s),s.invalidateShadow=!1)}function p(e,t){for(var n=Dt(t),o=0;o<n.length;o++)e[o]=n[o];for(var i=0;i<e.length-n.length;i++)e.pop()}function m(){return a}return{element:h,draggables:u.draggables,isDragRelevant:(i=(e=u).element,r=e.getOptions,function(e,t){var n=r();if(n.shouldAcceptDrop)return n.shouldAcceptDrop(e.getOptions(),t);t=e.getOptions();return"copy"!==n.behaviour&&(j(i,"."+v)!==e.element&&(e.element===i||!(!t.groupName||t.groupName!==n.groupName)))}),layout:u.layout,dispose:function(e){var t;f.dispose(),t=e.element,$t.wrapChild&&Array.prototype.forEach.call(t.children,function(e){e.nodeType===Node.ELEMENT_NODE&&_(e,v)&&(t.insertBefore(q(e),e),t.removeChild(e))})},prepareDrag:function(e,t){var n=e.element,o=u.draggables;p(o,n),e.layout.invalidateRects(),o.forEach(function(e){return Ot(e,!0,a.animationDuration)}),f.start()},handleDrag:function(e){return l=c(s=e)},handleDrop:function(e){f.stop(),l&&l.dropPlaceholderContainer&&h.removeChild(l.dropPlaceholderContainer),s=null,l=l||c(e),c=Yt(u),d(e,l),l=null},fireRemoveElement:function(){d(s,Object.assign({},l,{addedIndex:null}),!0),l=null},getDragResult:function(){return l},getTranslateCalculator:function(e){return Ht(u)(e)},onTranslated:function(){g()},setDraggables:function(){p(u.draggables,h)},getScrollMaxSpeed:function(){return $t.maxScrollSpeed},shouldUseTransformForGhost:function(){return!0===$t.useTransformForGhost},getOptions:m,setOptions:function(e){a=!1===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])?Object.assign({},E,e):Object.assign({},E,a,e)}}}}var $t=function(e,t){var n=Ut(e)(t);return e[i]=n,Ct.register(n),{dispose:function(){Ct.unregister(n),n.dispose(n)},setOptions:function(e,t){n.setOptions(e,t)}}};$t.wrapChild=!0,$t.cancelDrag=function(){Ct.cancelDrag()},$t.isDragging=function(){return Ct.isDragging()},e.faiDnD=$t,e.constants=t,e.dropHandlers=$,Object.defineProperty(e,"__esModule",{value:!0})});
